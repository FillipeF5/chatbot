<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Painel Admin - Estúdio Vinicius Queiroz</title>
  <style>
    body{font-family:Arial,Helvetica,sans-serif;padding:20px;background:#fafafa}
    table{width:100%;border-collapse:collapse}
    th,td{border:1px solid #ddd;padding:8px}
    th{background:#222;color:#fff}
    .badge{padding:4px 8px;border-radius:6px;background:#eee}
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.5.4/socket.io.min.js"></script>
</head>
<body>
  <h1>Painel Admin — Estúdio Vinicius Queiroz</h1>
  <p><a href="/">Voltar</a></p>
  <table>
    <thead><tr><th>ID</th><th>Nome</th><th>Telefone</th><th>Serviço</th><th>Data/Hora</th><th>Status</th><th>Criado em</th></tr></thead>
    <tbody id="rows">
    {% for a in appointments %}
      <tr><td>{{a.id}}</td><td>{{a.name}}</td><td>{{a.phone}}</td><td>{{a.service}}</td><td>{{a.datetime}}</td><td>{{a.status}}</td><td>{{a.created_at}}</td></tr>
    {% endfor %}
    </tbody>
  </table>
  <script>
    const socket = io();
    socket.on("new_appointment", (data) => {
      alert("Novo agendamento recebido: " + data.name + " (" + data.phone + ")");
      // In a production UI we'd prepend a row via DOM manipulation
    });
  </script>
</body>
</html>